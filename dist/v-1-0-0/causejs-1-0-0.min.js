/*
Cause JS core component @ 2019 River Zend Dynamics, all rights reserved.
Version 1.00 released on 2019-12-28
Available for free from https://github.com/causejs/causejs
Official documentation, T & Cs at https://causejs.org
*/
class _Cause{constructor(e){this.parsedConfig={},this.config=[],this.configNest=0,this.configArr=[],this.configCheck=[],this.lazyConfig=[],this.concatConfig="",this.concatConfigCo=0,this.concatConfigLen=0,this.currentPage="",this.currentPagePars="",this.currentPageID="",this.noURLChange=!1,this.hrefs={},this.ajaxResLocations={},this.pageList=[],this.eventState={},this.delayArr=[],this.cancelIDArr=[],this.cancelCustomArr=[],this.preloadedImages=[],this.selectors=[],this.setupEnded=!1,this.clickOutsideSet=!1,this.clickOutsideSels=[],this.mimicClones=[],this.currDocTitle=document.title,this.debugMode="",this.lineAttrX=/([^\:]+):([^\;]*)(;)?/,this.altX=/(\/\*[\s\S]*?\*\/)|((?!\*debugfile)[^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|((?!\*debugfile)[^\;\{\}]+\;(?!\s*\*\/))|(\*debugfile[\s\S]*?\*)/gim,this.capComment=1,this.capSelector=2,this.capEnd=3,this.capAttr=4,this.capDebug=5,this.colonSels="^(",this.colonSels+="active|any-link|blank|checked|current|default|disabled|drop|empty|enabled|first-child|first-of-type|focus|focus-visible|focus-within|future|hover|indeterminate|in-range|invalid|last-child|last-of-type|link|local-link|only-child|only-of-type|optional|out-of-range|past|paused|placeholder-shown|playing|read-only|read-write|required|root|scope|target|target-within|user-error|user-invalid|valid|visited|",this.colonSels+="(current|dir|drop|has|is|lang|not|nth-column|nth-child|nth-last-child|nth-last-column|nth-last-of-type|nth-of-type|where)\\(",this.colonSels+=")",this.conditionals=[],this.components=[],this.mediaQueries=[],this.mediaQueriesOrig=[],this.newConfig={},this.causeIDTrack=0,this.scriptTrack=[],this._debuggerActive=!1,this._debugger=!1,this._debuggerExtID=null,this._debuggerEvs=["afterLoadConfig"],this._debuggerCo=0,this._evEditorExtID=null,this._evEditorActive=!1,this.configLine="",this.configFile="",this.devtoolsInit=[]}init(e){let t;for(t of(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var a=0;a<this.length;a++)e.call(t,this[a],a,this)}),String.prototype._CjsCapitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype._CjsCapitalizeAttr=function(){return this.replace(/(^|[\s-])\S/g,function(e){return e.toUpperCase()})},String.prototype._CjsDecodeHTML=function(){var e=document.createElement("textarea");return e.innerHTML=this,e.value},String.prototype._CjsRepQuo=function(){var e=this.replace(/\\"/g,"_lionelritchie_");return e=(e=(e=(e=e.replace(/\\'/g,"_sayyousayme_")).replace(/["']/g,"")).replace(/_lionelritchie_/g,'"')).replace(/_sayyousayme_/g,"'")},String.prototype._CjsSpaceQuoIn=function(){return this.replace(/"(.+?)"/g,function(e,t){return t=t.replace(/ /g,"_cjs_space")})},String.prototype._CjsSpaceQuoOut=function(){return this.replace(/_cjs_space/g," ")},Cause.lazyConfig=e.lazyConfig||"",e.configLocation=e.configLocation||console.log("Cause config file not declared in setup."),e.debugMode&&(this.debugMode=e.debugMode,document.parentNode?console.log("CauseJS debug mode in iframe ID "+window.frameElement.id+": "+this.debugMode):console.log("CauseJS debug mode: "+this.debugMode)),this.configArr=e.configLocation.split(","),this.concatConfigLen=this.configArr.length,this.configArr))t=t.trim(),this._getFile(t,"txt","_AddConfig","_AddConfigError",{file:t})}_handleEvents(e,t,a=!1,s=null,r=null,l=null,n=null){if("string"!=typeof e&&!e||!Cause.selectors[t]||void 0===t)return!1;var o,c,i,u,d,C,f=[],p=[],_=Cause.selectors[t].length;if("string"!=typeof e){for(o=0;o<_;o++)if(-1===(c=l&&n?Cause._replaceAttrs(n,Cause.selectors[t][o],document):Cause.selectors[t][o]).indexOf("<")&&!p.includes(Cause.selectors[t][o])&&"~"!==c.substr(0,1))try{e.matches(c)&&p.push(Cause.selectors[t][o])}catch(e){console.log("Cause JS warning: "+c+" is not a valid CSS selector, skipping.")}}else p.push(e),e=n||e;var g=!1;_=p.length;let m,h,b,j,S,y,v="",O=["&","self","this"];for(d=0;d<_;d++)if(Cause.config[p[d]]&&Cause.config[p[d]][t]){if(a)return!0;let l;for(l in Cause.config[p[d]][t]){if(y="","0"!=l){if(!Cause._passesConditional(e,d,l,t,s))continue;y=l}if(!1!==(C=Cause.config[p[d]][t][l]))for(i in C)if("conds"!=i&&(S=Cause._splitIframeEls(i)))for(u in b=S[0],j=S[1],j=this._replaceAttrs(e,j,b),j=this._replaceAttrs(s,j,b),O.includes(j)&&(j="string"==typeof e?e:(v=Cause._getCauseID(e))?'[data-causeid="'+v+'"]':e),C[i])h="_a"+C[i][u].name._CjsCapitalizeAttr().replace(/\-/g,""),m=C[i][u].value,f.push({event:t,func:h,actName:C[i][u].name,secSel:j,origSecSel:i,actVal:m,origActVal:m,primSel:p[d],rules:C[i],obj:e,doc:b,ajaxObj:s,e:r,passCond:y,file:C[i][u].file,line:C[i][u].line,causeID:v})}}var A=f.length;for(o=0;o<A;o++)this._performAction(f[o]),g=!0;return g}_aLoadConfig(e){e.actVal=e.actVal._CjsRepQuo().trim(),this.configArr.includes(e.actVal)?Cause._handleEvents(e.obj,"afterLoadConfig"):(e.file=e.actVal,this._getFile(e.actVal,"txt","_AddConfig","_AddConfigError",e))}_AddConfigError(e,t){Cause._handleEvents(t.obj,"loadconfigerror")}_AddConfig(e,t){let a=e.match(/^.*((\r\n|\n|\r)|$)/gm),s="";for(let e=0;e<a.length;e++)s+="*debugfile:"+t.file+":"+(e+1)+"*"+a[e];e=s,this.concatConfig+=e,this.concatConfigCo++,this.concatConfigCo>=this.concatConfigLen&&this._readSiteMap(),this.concatConfigCo>this.concatConfigLen&&(this.configArr.push(t.actVal),"load-config"==t.actName&&Cause.setupEnded&&(Cause._debuggerActive&&Cause._tellPanelToUpdate(),Cause._evEditorActive&&Cause._tellElementsToUpdate()),Cause._handleEvents(t.obj,"afterLoadConfig"))}_readSiteMap(){this.parsedConfig=this._parseConfig(this.concatConfig),this.concatConfig="",!!this.debugMode&&this._doDebug("parser")&&console.log(this.parsedConfig),this._makeVirtualConfig(),Cause.setupEnded||(this._startMainListen(),Cause._initScriptTrack(),Cause._handleEvents("body","init"),Cause._runInnerEvent("*","draw"),Cause._handleEvents("body","scroll"),this._wrapUpStart(),""!==Cause.lazyConfig&&setTimeout(function(){let e,t=Cause.lazyConfig.split(",");for(e of t)Cause._aLoadConfig({actName:"load-config",actVal:e,doc:document})},1e3))}_runInnerEvent(e,t,a=document){"string"==typeof e?a.querySelectorAll(e).forEach(function(e){Cause._handleEvents(e,t,!1)}):(Cause._handleEvents(e,t,!1),Cause._runInnerEvent("*",t,e))}_initScriptTrack(){document.querySelectorAll("script").forEach(function(e,t){Cause.scriptTrack.push(e.src)})}_wrapUpStart(){let e=Cause._resolveURL(window.location.href);window.history.replaceState(e,document.title,e),Cause.setupEnded=!0}_startMainListen(){window.addEventListener("message",function(e){if(e.origin===window.location.origin&&"causejs-devtools-extension"!=e.data.source){var t=e.data,a=t.type.replace("cjs-","");switch(a){case"unloading":case"loaded":let e=document.getElementById(t.el);Cause._handleEvents(e,a)}}}),document.parentNode?(window.addEventListener("beforeunload",function(e){parent.postMessage({type:"cjs-unloading",el:window.frameElement.id},window.location.origin)}),parent.postMessage({type:"cjs-loaded",el:window.frameElement.id},window.location.origin)):window.addEventListener("popstate",function(e){let t=e.state;if(!t)return;Cause._debuggerActive&&Cause._debugOutput("Popstate event");let a=document.querySelector("#data-cause-page-list"),s=!1;if(t&&a){let e=new URL(t),r=e.pathname+e.search,l=a.querySelector('a[href="'+r+'"]');l&&(Cause.trigger(l,"click"),s=!0)}s||(window.location.href=t)}),this.currentPage=location.pathname}_drawFunc(e){return new MutationObserver(function(t){t.forEach(function(t){"object"==typeof t.addedNodes&&document.contains(t.target)&&t.target.querySelectorAll("*").forEach(function(t){Cause._handleEvents(t,"draw",!1,e)})}),this.disconnect()})}_unloadAllCancelDelayed(){let e,t,a;for(e in Cause.delayArr)for(t in Cause.delayArr[e])for(a in Cause.delayArr[e][t])clearTimeout(Cause.delayArr[e][t][a]),Cause.delayArr[e][t][a]=null;Cause.delayArr=[],Cause.cancelIDArr=[]}_parseConfig(e){var t={"{":"_cjs_brace_start","}":"_cjs_brace_end",";":"_cjs_semi_colon",":":"_cjs_colon","/":"_cjs_slash"};let a=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"")).replace(/[\r\n\t]+/gm,"")).replace(/\\\"/g,"_cjs_escaped_quote")).replace(/\{\$([a-z0-9_\-\.\{\$\|\@\}]+)\}/gi,function(e,t){return"_cjs_subst_dollar_brace_start"+(t=t.replace(".","_cjs_dot"))+"_cjs_subst_brace_end"})).replace(/\{\@([a-z0-9_\-\.\{\$\|\@\}\#\:]+)\}/gi,function(e,t){return"_cjs_subst_at_brace_start"+(t=t.replace(".","_cjs_dot"))+"_cjs_subst_brace_end"})).replace(/\{\|([a-z0-9_\-\.\{\$\|\@\}]+)\}/gi,function(e,t){return"_cjs_subst_pipe_brace_start"+(t=t.replace(".","_cjs_dot"))+"_cjs_subst_brace_end"})).replace(/\\{/g,"_cjs_brace_start")).replace(/\\}/g,"_cjs_brace_end")).replace(/(\|[a-z0-9_\- ]+{)([\s\S]*?)}/gi,function(e,t,a){return t+'{component: "'+(a=(a=a.replace(/_cjs_escaped_quote/g,'\\"')).replace(/"/g,"_cjs_escaped_quote"))+'";}'})).replace(/("([^"]|"")*")/g,function(e,a){return Cause._mapRegexReturn(t,a)})).replace(/([\(]([^\(\)]|\(\))*[\)])/g,function(e,a){return Cause._mapRegexReturn(t,a)})).split("{").length;return(e=Cause._toJSON(e,a))[0]||console.log("Cause JS: Either your config is empty or there is a syntax error."),e}_mapRegexReturn(e,t){if("string"!=typeof t)return t;let a=new RegExp(Object.keys(e).join("|"),"gi");return t=t.replace(a,function(t){return e[t]})}_sortOutEscapeChars(e){return this._mapRegexReturn({_cjs_brace_start:"{",_cjs_brace_end:"}",_cjs_escaped_quote:'\\"',_cjs_semi_colon:";",_cjs_colon:":",_cjs_slash:"/",_cjs_subst_dollar_brace_start:"{$",_cjs_subst_at_brace_start:"{@",_cjs_subst_pipe_brace_start:"{|",_cjs_subst_brace_end:"}",_cjs_dot:"."},e)}_toJSON(e,t,a=0){let s,r,l,n,o,c={children:{},attributes:{}},i=null,u=0;for(;null!==(i=this.altX.exec(e));){if(a>t)return console.log("Syntax error in config - possibly an incomplete set of curly brackets."),!1;if(i[this.capDebug])o=i[this.capDebug].split(":"),Cause.configFile=o[1],Cause.configLine=o[2].substr(0,o[2].length-1);else if(i[this.capSelector]){if(a++,s=(s=i[this.capSelector].trim()).replace(/\*debugfile[\s\S]*?\*|([^:]|^)\/\/.*$/g,""),Cause.configCheck++,!1===(n=this._toJSON(e,t,a)))return!1;Cause.configCheck--,(l={}).name=Cause._sortOutEscapeChars(s),l.value=n,l.line=Cause.configLine,l.file=Cause.configFile,l.type="rule",c[u++]=l}else{if(i[this.capEnd])return c;if(i[this.capAttr]){var d=i[this.capAttr].trim();d=d.replace(/\*debugfile[\s\S]*?\*|([^:]|^)\/\/.*$/g,"");var C=this.lineAttrX.exec(d);C?(s=C[1].trim(),r=C[2].trim(),(l={}).name=Cause._sortOutEscapeChars(s),l.value=Cause._sortOutEscapeChars(r),l.type="attr",l.line=Cause.configLine,l.file=Cause.configFile,c[u++]=l):c[u++]=d}}}return Cause.configCheck--,c}_makeVirtualConfig(e="",t=""){var a,s,r,l,n,o,c,i,u=""!==e?e:Cause.parsedConfig;if(Object.keys(u).forEach(function(e){if(u[e].name)for(n=u[e].name,u[e].value,a=n.split(","),s=a.length,r=0;r<s;r++)switch((l=a[r].trim()).slice(0,1)){case"?":let s=l.substr(1);Cause.conditionals[s]=void 0===Cause.conditionals[s]?[]:Cause.conditionals[s],Cause.conditionals=Cause._iterateConditionals(Cause.conditionals,u[e].value,s);break;case"|":let d=l.substr(1);Cause.components[d]||(Cause.components[d]={}),Cause.components[d].data=u[e].value[0].value.slice(1,-1),Cause.components[d].data=Cause.components[d].data.replace(/\\\"/g,'"'),Cause.components[d].file=u[e].value[0].file,Cause.components[d].line=u[e].value[0].line;break;case"@":t=Cause._setupMediaQueryHandler(l.slice(7).trim()),Cause._makeVirtualConfig(u[e].value,t),t="";break;default:if("page-list"==l)Cause._iteratePageList(u[e].value);else{if(!(o=l.split(":"))[1]){console.log('"'+n+'" '+l+" is not a fully formed selector - it may be missing an event or have incorrect syntax. Or you have too many closing curly brackets.");continue}i=o.shift(),c=(c=o.pop()).trim();let a,s=[],r=[];if(o){let e,t;for(t of o)(e=new RegExp(Cause.colonSels,"g")).test(t)?s.push(t):r.push(t)}""!==t&&r.push(t),s.length>0&&(i+=":"+s.join(":")),Cause._setupEvent(c,i),Cause.newConfig[i]=void 0===Cause.newConfig[i]?{}:Cause.newConfig[i],Cause.newConfig[i][c]=void 0===Cause.newConfig[i][c]?{}:Cause.newConfig[i][c],a=0===r.length?0:r.join(" "),Cause.newConfig=Cause._iterateRules(Cause.newConfig,u[e].value,i,c,a)}}}),""!==e)return;Cause.config=Cause.newConfig;let d=!!this.debugMode&&this._doDebug("config");d&&Object.keys(Cause.config).forEach(function(e){console.log(e,Cause.config[e])}),(d=!!this.debugMode&&this._doDebug("conditionals"))&&Object.keys(Cause.conditionals).forEach(function(e){console.log(e,Cause.conditionals[e])}),(d=!!this.debugMode&&this._doDebug("components"))&&Object.keys(Cause.components).forEach(function(e){console.log(e,Cause.components[e])})}_doDebug(e,t){if(t){if(-1!==Cause.debugMode.indexOf(":")){let a=t.split(":");return-1!==Cause.debugMode.indexOf(a[0]+":"+e)}return-1!==Cause.debugMode.indexOf(t)||-1!==Cause.debugMode.indexOf(e)}return-1!==Cause.debugMode.indexOf(":")?-1!==Cause.debugMode.indexOf(e)&&Cause.debugMode.indexOf(":")!==Cause.debugMode.indexOf(e)-1:-1!==Cause.debugMode.indexOf(e)}_iteratePageList(e){if(!("content"in document.createElement("template")))return void console.log("Browser does not support html5. Cannot instantiate page navigation.");let t=document.createElement("template");var a,s;t.id="data-cause-page-list";let r=Math.floor(1e7*Math.random());Object.keys(e).forEach(function(l){(a=e[l].name)&&(-1!==Cause.pageList.indexOf(a)&&console.log("Config error: Page "+a+" is referenced twice."),s=e[l].value.replace(/\{\$RAND\}/g,r),t.insertAdjacentHTML("beforeend","<a href="+a.trim()+" "+s.trim()+">"))}),document.body.appendChild(t)}_iterateConditionals(e,t,a){var s,r;return Object.keys(t).forEach(function(l){(r=t[l].name)&&(s=e[a].length,e[a][s]={},e[a][s].name=r,e[a][s].value=t[l].value,e[a][s].file=t[l].file,e[a][s].line=t[l].line)}),e}_iterateRules(e,t,a,s,r){let l,n,o,c,i,u,d;return Object.keys(t).forEach(function(C){if(t[C].name)if("string"!=typeof t[C].value){for(l in n="",o="",t[C].value)if(void 0!==t[C].value[l].type)for(c=t[C].name.split(","),i=c.length,d=0;d<i;d++)u=c[d].trim(),e=Cause._AssignRule(e,a,s,r,u,t[C].value[l].name,t[C].value[l].value,t[C].file,t[C].line)}else e=Cause._AssignRule(e,a,s,r,"&",t[C].name,t[C].value,t[C].file,t[C].line)}),e}_AssignRule(e,t,a,s,r,l,n,o,c){let i;if(void 0===e[t]&&(e[t]={}),void 0===e[t][a]&&(e[t][a]={}),void 0===e[t][a][s]&&(e[t][a][s]={}),void 0===e[t][a][s][r]&&(e[t][a][s][r]=[]),-1!=(i=Cause._getPosOfRule(e[t][a][s][r],l))){e[t][a][s][r][i].value+=", "+n;let l="",u="";return e[t][a][s][r][i].file&&(l=","+o,u=","+c),e[t][a][s][r][i].file+=l,e[t][a][s][r][i].line+=u,e}return e[t][a][s][r].push({name:l,value:n,file:o,line:c}),e}_setupEvent(e,t,a){void 0===Cause.selectors[e]&&(Cause.selectors[e]=[]);let s=e.substr(0,5);if(!(Cause.selectors[e].includes(t)||(Cause.selectors[e].push(t),Cause._debuggerEvs.includes(e)||(Cause._debuggerEvs.push(e),"after"==s&&"afterprint"!=e||("fullscreenEnter"!=(e="keyup"==e.substr(0,5)?"keyup":"keydown"==e.substr(0,7)?"keydown":e)&&"fullscreenExit"!=e||(e=Cause._fsDetails()[1]+"fullscreenchange"),Cause.eventState[e]))))){(document.parentNode&&"body"==t&&"scroll"==e?document.body:window).addEventListener(e,function(t){if(!Cause.setupEnded&&!a)return;{let a=Cause._fsDetails();switch(e){case"click":t.ctrlKey||Cause._handleClick(t);break;case"keyup":case"keydown":let s=t.ctrlKey?"Ctrl":"",r=t.shiftKey?"Shift":"",l=t.key;switch(t.key){case":":l="Colon",r="";break;case";":l="Semicolon",r="";break;case"{":l="OpenCurly",r="";break;case"}":l="CloseCurly",r="";break;case'"':l="DoubleQuotes",r="";break;case"'":l="SingleQuote",r=""}Cause._handleEventEvents(e+s+r+l,t),Cause._handleEventEvents(e,t);break;case a[1]+"fullscreenchange":Cause._handleEventEvents(e,t),a[0]?Cause._handleEventEvents("fullscreenEnter",t):Cause._handleEventEvents("fullscreenExit",t);break;default:Cause._handleEventEvents(e,t)}}},{capture:!0}),Cause.eventState[e]=!0}}_fsDetails(){let e;return e="MSGesture"in window?[document.webkitFullscreenElement,"webkit"]:[document.fullscreenElement,""]}_handleEventEvents(e,t){if("cause-js-elements-ext"!=t.target.id){var a;if(t.target==self||t.target.body)return Cause._handleEvents("body",e,!1,null,t),void Cause._handleEvents("window",e,!1,null,t);if(a=t.primSel?t.secSelObj:t.target,t.target==self||t.target.body||"mouseover"==e&&"A"==a.tagName&&1!==a["data-cause-nav"]&&Cause._setUpNavAttrs(a),"window"!=a)for(;a.parentNode&&!Cause._handleEvents(a,e,!1,null,t)&&a.parentNode;){if(a.causeStopProp){a.causeStopProp=!1;break}if(!t.bubbles)break;a=a.parentNode}}}_CheckForm(e,t){if(!e)return!1;for(var a,s,r,l,n,o,c="check"==t,i="pars"==t,u="",d=[],C=0,f=e.elements.length;C<f;C++)if(s=!1,(a=e.elements[C]).hasAttribute("name")){switch(a.nodeName.toLowerCase()){case"select":for(r=0,l=0,n=a.options.length;l<n;l++)o=a.options[l],s=s||o.selected!=a.defaultSelected,o.defaultSelected&&(r=l);s&&!a.multiple&&(s=r!=a.selectedIndex),u+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.options[a.selectedIndex].value);break;case"textarea":case"input":switch(a.type.toLowerCase()){case"checkbox":s=a.checked!=a.defaultChecked,u+="&"+a.getAttribute("name")+"="+(a.checked?"on":"");break;case"radio":s=a.checked!=a.defaultChecked,a.checked&&(u+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.value));break;default:s=a.value!=a.defaultValue,u+="&"+a.getAttribute("name")+"="+encodeURIComponent(a.value)}break;case"hidden":u+=i?"&"+a.getAttribute("name")+"="+encodeURIComponent(a.value):""}c&&s&&d.push(a)}return c?!!d.length:i?"_CJSFORMNAME="+(e.name?e.name:"")+u:void 0}_passesConditional(e,t,a,s,r,l){let n,o,c,i,u,d,C,f,p=a.split(" "),_=!1;for(i of p)if(u=Cause.conditionals[i])for(n in u)if(u.hasOwnProperty(n)&&("!"==(o=u[n]).name.substr(0,1)?(_=!1,c=o.name.substr(1)):(_=!0,c=o.name),c="_c"+c._CjsCapitalizeAttr().replace(/\-/g,""),"function"==typeof Cause[c])){let a=o.value.replace(/"[^"]*"|(\,)/g,function(e,t){return t?"_cjsComma":e});for(C=(d=(a=-1!==(a=Cause._replaceAttrs(e,a,e.ownerDocument)).indexOf("{$")?Cause._replaceAjaxVars(r,a):a).split("_cjsComma")).length,f=0;f<C;f++)if(Cause[c]({func:c,actName:o.name,secSel:"conditional",actVal:d[f].trim(),primSel:t,rules:u,obj:e,doc:l,ajaxObj:r})!==_)return!1}return!0}_CheckContainedWithin(e,t,a){return"body"==t?a!==document.body&&document.body.contains(a):(e.querySelectorAll(t).foreach(function(e,t){"ok"!=s&&(!e||e.isSameNode(a)||e.contains(a))&&(s="ok")}),"ok"==s);var s}_handleClickOutside(e){let t,a;for(t in Cause.clickOutsideSels)if(Cause.clickOutsideSels[t][0]&&(a=document.querySelector('[data-causeid="'+t+'"]'))&&!a.contains(e)&&Cause._handleEvents(a,"clickoutside",!1,e)&&!Cause.clickOutsideSels[t][1])return!1;return!0}_aClickoutsideEvent(e){let t=Cause._getCauseID(e.secSelObj);-1!==e.actVal.indexOf("true")?setTimeout(function(){Cause.clickOutsideSels[t]=[],Cause.clickOutsideSels[t][0]=!0,Cause.clickOutsideSet=!0,-1!==e.actVal.indexOf("continue")&&(Cause.clickOutsideSels[t][1]=!0)},50):Cause.clickOutsideSels[t]&&(Cause.clickOutsideSels[t][0]=!1,Cause.clickOutsideSet=!1)}_handleClick(e){if("cause-js-elements-ext"!=e.target.id){var t;if(e.primSel)t=e.secSelObj;else{if(0!==e.button)return;t=e.target}if("bypass"!=e.primSel&&Cause.clickOutsideSet&&!Cause._handleClickOutside(t))return e.primSel||e.preventDefault(),!1;for(;t.parentNode&&("A"==t.tagName&&1!==t["data-cause-nav"]&&Cause._setUpNavAttrs(t),Cause._handleEvents(t,"click",!1,null,e),t.parentNode)&&!t.causeStopProp;)t=t.parentNode;t&&t.causeStopProp?t.causeStopProp=!1:document.parentNode&&Cause._handleEvents(window.frameElement,"click",!1,null,e)}}_CloneAttrs(e,t){let a,s=Array.prototype.slice.call(t.attributes);for(a of s)"href"!=a.nodeName&&("class"==a.nodeName?Cause._AddClassObj(e,a.nodeValue):e.getAttribute(a.nodeName)||e.setAttribute(a.nodeName,a.nodeValue));e.setAttribute("data-cause-nav","1")}_setUpNavAttrs(e){let t,a,s;(t=document.querySelector("#data-cause-page-list"))&&(a=e.getAttribute("href"))&&(s=t.querySelector('a[href="'+a+'"]'))&&Cause._CloneAttrs(e,s)}_objByID(e,t){return t.getElementById(e)}_hasClassObj(e,t){return e.classList.contains(t)||!1}_removeClassObj(e,t){if(!e||!e.classList)return;let a=t.replace(".","").split(" ");e.classList.remove(...a)}_setClassObj(e,t){e&&e.classList&&(e.className=t)}_AddClassObj(e,t){if(!e||!e.classList)return;let a=t.replace(".","").split(" ");e.classList.add(...a)}_toggleClassObj(e,t){e&&e.classList&&e.classList.toggle(t)}_ConvertToMS(e,t){if("stack"==e)return 0;var a=/^(\d+)(ms|s)?$/i.exec(e);if(!a)return console.log(t),!1;var s=parseFloat(a[1]);return"s"==(a[2]||"ms").toLowerCase()?1e3*s:s}rand(e,t){return Math.floor(Math.random()*(t-e+1))+e}_eachRemoveClass(e,t,a){var s=this;a.querySelectorAll("."+e).forEach(function(e,a){e&&s._removeClassObj(e,t)})}ajax(e,t,a,s,r,l,n){var o,c=new XMLHttpRequest;switch(c.open(e,a,!0),t){case"html":case"txt":o="text/html";break;case"json":o="application/json";break;default:o="application/x-www-form-urlencoded"}c.setRequestHeader("Content-type",o),c.onreadystatechange=function(){if(4==c.readyState){if(200!=c.status){if(!l)return void console.log("Tried to get file: "+a+", but failed with error code: "+c.status);l(c.responseText,c.status,n)}null!==r&&r(c.responseText,n)}},"POST"==e&&null!==s?c.send(s):c.send()}_setsrcObj(e,t){e&&(e.src=t)}_getFile(e,t,a,s,r={}){a?this.ajax("GET",t,e,null,this[a].bind(this),this[s].bind(this),r):this.ajax("GET",t,e)}_splitIframeEls(e){let t,a,s,r;if(-1!==e.indexOf(" -> ")){if(!(t=e.split(" -> "))[1])return!1;"parent"==t[0]?window.parent.document?s=window.parent.document:console.log("No parent present to perform action on "+t[1]):s=window.document.querySelector(t[0]).contentWindow.document,a=t[1],r=t[0]}else a=e,s=window.document;return[s,a,r]}_performAction(e){if("complete"!=e.doc.readyState)return setTimeout(this._performAction.bind(this,e),200),!1;if("string"==typeof e.secSel&&-1!==e.secSel.indexOf("{@i}")){let t=/(.*)\{\$([a-zA-Z0-9\.\{\@\}]+)\}(.*)/g.exec(e.secSel);Cause._performActionLoop(t[2],e,e.ajaxObj.res,e.secSel)}else Cause._performActionDo(e)}_performActionLoop(e,t,a,s){let r,l,n=e.indexOf("{@"),o=0;if(-1!==n)if("i"!=(o=e.substr(n+2,e.indexOf(">")-n-1))){let s=e.indexOf("{@i}");a=(l=(l=(l=e.substr(0,s)).replace(/\{\@/g,".")).replace(/\}/g,"")).split(".").reduce(Cause._getObjFromDots,t.ajaxObj.res),r=!0}else r=!0,a=(l=e.substr(0,n)).split(".").reduce(Cause._getObjFromDots,t.ajaxObj.res);if(r){let e,r;r=a.length;let l=t.actVal;for(e=0;e<r;e++)t.secSel=s.replace("{@i}","{@"+e+"}"),t.actVal=l,Cause._performActionDo(t,e)}else Cause._performActionDo(t)}_performActionDo(e,t){if(e.secSel="string"==typeof e.secSel?Cause._replaceAjaxVars(e.ajaxObj,e.secSel):e.secSel,!e.secSel)return;let a,s,r=e.actVal.replace(/"[^"]*"|(\,)/g,function(e,t){return t?"_cjsComma":e}).split("_cjsComma");for(a=r.length,s=0;s<a;s++){let a=Object.assign({},e);a.actVal=r[s].trim(),a.actPos=s,"number"==typeof t&&(a.actVal=a.actVal.replace("{@i}","{@"+t+"}")),Cause._loopPerform(a)}}_loopPerform(e){if("function"==typeof Cause[e.func])if("object"==typeof e.secSel)e.secSelObj=e.obj,Cause._handleFunc(e);else if("~"==e.secSel.substr(0,1))e.secSelObj={},Cause._handleFunc(e);else{let t=!1;"#"==e.secSel&&console.log("Error: "+e.primSel+" "+e.event+", "+e.actName+': "'+e.origSecSel+'" is being converted to "#". Attribute or variable is not present.'),e.doc.querySelectorAll(e.secSel).forEach(function(a,s){t=!0,e.secSelObj=a,Cause._handleFunc(e,!0)}),t||-1!==e.secSel.lastIndexOf("data-causeid")&&(e.secSelObj=e.obj,e.actVal=Cause._replaceAttrs(e.obj,e.actValSing,e.doc,e.secSelObj),Cause._handleFunc(e))}else console.log('Warning: Skipping invalid action "'+e.actName+'" on line '+e.line+", "+e.file+'. The appropriate _Cause class function "'+e.func+'" does not exist.')}_elNotThere(e){let t=Cause._getWindow(e.doc);return!(e.secSelObj instanceof t.Element)}_handleFunc(e,t){let a;if("string"==typeof e.secSel&&"~"==e.secSel.substr(0,1))a=e.secSel;else{if(Cause._elNotThere(e)||!e.actVal)return void Cause._aStopPropagation(e);a=Cause._getCauseID(e.secSelObj)}if(-1!==e.actVal.indexOf(" after ")){let s=Object.assign({},e),r=this._delaySplit(s.actVal);if(s.actVal=r[1],s.actValSing=s.actVal,r&&r[0]>=0)return Cause.delayArr[a]=void 0!==Cause.delayArr[a]?Cause.delayArr[a]:[],Cause.delayArr[a][s.func]=void 0!==Cause.delayArr[a][s.func]?Cause.delayArr[a][s.func]:[],Cause.delayArr[a][s.func][s.actPos]&&(clearTimeout(Cause.delayArr[a][s.func][s.actPos]),Cause._removeCancel(a,s.func,s.actPos)),s.delayed=!0,void(Cause.delayArr[a][s.func][s.actPos]=setTimeout(Cause._handleFunc.bind(this,s,t),r[0]))}else e.actValSing=e.actVal;"string"==typeof e.secSel&&"~"==e.secSel.substr(0,1)&&Cause.cancelCustomArr[a]&&Cause.cancelCustomArr[a][e.func]&&Cause.cancelCustomArr[a][e.func][e.actPos]?Cause._removeCancel(a,e.func,e.actPos):e.delayed&&Cause.cancelIDArr[a]&&Cause.cancelIDArr[a][e.func]||(e.actVal=t?Cause._replaceAttrs(e.obj,e.actValSing,e.doc,e.secSelObj):Cause._replaceAttrs(e.obj,e.actValSing,e.doc),(Cause._debuggerActive||!Cause.setupEnded&&"function"==typeof Cause._debugOutput)&&Cause._debugOutput(e),Cause[e.func](e),Cause._removeCancel(a,e.func,e.actPos),0===Object.keys(e.secSelObj).length&&-1===e.actName.indexOf("ajax")&&-1===e.actName.indexOf("load")&&Cause._handleEvents(e.secSelObj,"after"+e.actName._CjsCapitalizeAttr().replace(/\-/g,""),!1,e.secSelObj,e.e,!0,e.obj))}_getWindow(e){try{return e.defaultView||e.parentWindow}catch(e){return window}}_delaySplit(e){let t=e.lastIndexOf('"')+1,a=t?e:e.substr(t).trim();if(!a.indexOf("after"))return null;let s,r=a.split(" "),l=0,n=null;for(s=r.length-1;s>=0&&"after"!=r[s];s--)"#"==r[s].substr(0,1)?n=r[s]:l=Cause._ConvertToMS(r[s],"Invalid delay number format.");return[l,e.substr(0,e.lastIndexOf("after")).trim(),n]}_aCancelDelayedAll(e){Cause._unloadAllCancelDelayed()}_aCancelDelayed(e){let t,a,s,r="_a"+e.actVal._CjsCapitalizeAttr().replace(/\-/g,""),l=!0;if(s="~"!=e.secSel.substr(0,1)?Cause._getCauseID(e.secSelObj):e.secSel){if(Cause.delayArr[s])if("all"==e.actVal)for(t in Cause.delayArr[s])for(a in Cause.delayArr[s][t])clearTimeout(Cause.delayArr[s][t][a]),Cause._removeCancel(s,t,a);else if(Cause.delayArr[s]&&Cause.delayArr[s][r])for(a in Cause.delayArr[s][r])clearTimeout(Cause.delayArr[s][r][a]),Cause._removeCancel(s,r,a);else l=!1;else l=!1;if(!l){let t,a=[];if(Object.keys(Cause.delayArr).forEach(function(t){"~"!=t.substr(0,1)&&e.doc.querySelectorAll(t).forEach(function(e,t){a.push(Cause._getCauseID(e))})}),"object"==typeof e.secSel)t=Cause._getCauseID(e.secSel),Cause.cancelIDArr[t]&&Cause.cancelIDArr[t][r]||!a.includes(t)||Cause._AddCancelAttr(e.secSel,r);else if("~"==e.secSel.substr(0,1)){if(!Cause.delayArr[s]&&!Cause.delayArr[s][r]&&!Cause.delayArr[s][r][e.actPos])return;Cause.cancelCustomArr.push([e.secSel][r][e.actPos])}else e.doc.querySelectorAll(e.secSel).forEach(function(e){t=Cause._getCauseID(e),Cause.cancelIDArr[t]&&Cause.cancelIDArr[t][r]||!a.includes(t)||Cause._AddCancelAttr(e,r)})}}}_AddCancelAttr(e,t){let a=e.dataset.causeid;Cause.cancelIDArr[a]||(Cause.cancelIDArr[a]=[]),Cause.cancelIDArr[a][t]=!0}_removeCancel(e,t,a){Cause.delayArr[e]&&Cause.delayArr[e][t]&&(Cause.delayArr[e][t][a]=null),"~"==e.substr(0,1)?Cause.cancelCustomArr[e]&&Cause.cancelCustomArr[e][t]&&(Cause.cancelCustomArr[e][t][a]=null):Cause._removeCancelAttr(e,t)}_removeCancelAttr(e,t){Cause.cancelIDArr[e]&&Cause.cancelIDArr[e][t]&&(Cause.cancelIDArr[e][t]=null)}_aRemoveClass(e){return Cause._removeClassObj(e.secSelObj,e.actVal),!0}_aSetClass(e){let t=e.actVal.replace(/\./g,"");Cause._setClassObj(e.secSelObj,t)}_aToggleClass(e){let t=e.actVal.replace(/\./g,"");Cause._toggleClassObj(e.secSelObj,t)}_aTakeClass(e){if(e.doc!=document)return console.log("CJS error - you cannot take a class if the element clicked on is not going to take the class. With iframes, use give-class instead."),!1;let t=e.actVal.substr(1);Cause._eachRemoveClass(t,t,e.doc),Cause._aAddClass(e)}_aAddClass(e){Cause._AddClassObj(e.secSelObj,e.actVal)}_removeObj(e){e&&e.parentNode.removeChild(e)}_aRemove(e){let t=Cause._getSel(e,e.actVal);Cause._removeObj(t)}_aIframeReload(e){let t=e.secSelObj.cloneNode(!1);e.secSelObj.parentNode.insertBefore(t,e.secSelObj),Cause._removeObj(e.secSelObj)}_AppendURIPar(e,t,a){var s=new RegExp("^([a-z]+://|//)","i");""!==e&&s.test(e)||(e=window.location.protocol+"//"+window.location.host+("/"!=e.substr(0,1)?"/":"")+e);let r,l,n=new URL(e),o=t.split("&"),c="";for(r of o)if(-1!==r.indexOf("="))(l=r.split("="))[1]?n.searchParams.set(l[0],l[1]):n.searchParams.set(l[0],"");else if("{#"==r.substr(0,2)){let e=r.slice(2,-1),t=a.getElementById(e);if("FORM"==t.tagName){let e=Cause._CheckForm(t,"pars"),s=Cause._AppendURIPar(n,e,a);n=new URL(s)}}else c+=r;return n+c}_aScrollY(e){if("body"==e.secSel)"top"==e.actVal?window.scrollTo({top:0}):"bottom"==e.actVal?window.scrollTo({top:1e7}):window.scrollTo({top:e.actVal});else{let t=e.secSelObj;t&&("top"==e.actVal?t.scrollTop=0:"bottom"==e.actVal?t.scrollTop=t.scrollHeight:t.scrollTop=e.actVal)}}_aScrollX(e){if("body"==e.secSel)"left"==e.actVal?window.scrollTo({left:0}):"right"==e.actVal?window.scrollTo({left:1e7}):window.scrollTo({left:e.actVal});else{let t=e.secSelObj;"left"==e.actVal?t.scrollLeft=0:"right"==e.actVal?t.scrollLeft=1e7:t.scrollLeft=e.actVal}}_aFocusOff(e){Cause._aBlur(e)}_aBlur(e){document.activeElement.blur()}_getFocusedOfNodes(e){let t,a,s,r=-1,l=-1;if(!(t=Cause._splitIframeEls(e)))return!1;if(null===t[0].activeElement)return-1;for(s of a=t[0].querySelectorAll(t[1])||null)if(r++,s.isSameNode(t[0].activeElement)){l=r;break}return[a,l]}first(e){return Cause._aFocusOn({actVal:e},null,!0)}last(e){return Cause._aFocusOn({actVal:e},"l",!0)}next(e){return Cause._aFocusOn({actVal:e},"n",!0)}nextCycle(e){return Cause._aFocusOn({actVal:e},"nc",!0)}previous(e){return Cause._aFocusOn({actVal:e},"p",!0)}previousCycle(e){return Cause._aFocusOn({actVal:e},"pc",!0)}_aClickOnFirst(e){Cause._aFocusOn(e)}_aClickOnLast(e){Cause._aFocusOn(e,"l")}_aClickOnNext(e){Cause._aFocusOn(e,"n")}_aClickOnNextCycle(e){Cause._aFocusOn(e,"nc")}_aClickOnPrevious(e){Cause._aFocusOn(e,"p")}_aClickOnPreviousCycle(e){Cause._aFocusOn(e,"pc")}_aFocusOnFirst(e){Cause._aFocusOn(e)}_aFocusOnLast(e){Cause._aFocusOn(e,"l")}_aFocusOnNext(e){Cause._aFocusOn(e,"n")}_aFocusOnNextCycle(e){Cause._aFocusOn(e,"nc")}_aFocusOnPrevious(e){Cause._aFocusOn(e,"p")}_aFocusOnPreviousCycle(e){Cause._aFocusOn(e,"pc")}_aFocusOn(e,t,a=!1){let s,r,l,n;if(-1!==["l","n","p","nc","pc"].indexOf(t))if("l"!=t)r=(l=Cause._getFocusedOfNodes(e.actVal))[0],n=l[1];else{let t=Cause._splitIframeEls(e.actVal);if(!t)return!1;r=t[0].querySelectorAll(t[1])||null}switch(t){case"p":case"pc":if("p"==t){if(0===n)return}else 0===n&&(n=r.length);s=r[n-1];break;case"n":case"nc":if("n"==t){if(n==r.length-1)return}else n==r.length-1&&(n=-1);s=r[n+1];break;case"l":s=r[r.length-1];break;default:s=Cause._getSel(e,e.actVal)}if(s)return a?s&&"FORM"==s.tagName?s.elements[0]:s:void(s&&"FORM"==s.tagName?"_aClick"==e.func.substr(0,7)?Cause.trigger(s.elements[0],"click"):s.elements[0].focus():"_aClick"==e.func.substr(0,7)?Cause.trigger(s,"click"):s.focus())}_replaceAttrs(e,t,a,s=null){return!t||t.match(/\{\@([0-9\.:]+|i)\}/)?t:t.replace(/\{\@([^\t\n\f \/>"'=]+)\}/gi,function(t,a){if("i"==a)return"{@i}";let r,l=a.split("."),n=[];if(l[1]&&"selected"==l[0]&&"SELECT"==e.tagName){if(r=e.options[e.selectedIndex].getAttribute(l[1]))return Cause._escapeItem(r);if(r=e.options[e.selectedIndex][l[1]])return Cause._escapeItem(r);n.push("Neither attribute or property "+l[1]+" found in target or primary selector:")}else{let t=a.indexOf(":");if(-1!==t){let e=Cause._getObj(a.substr(0,t)),s=a.substr(t+1);if("IFRAME"==e.tagName&&"url"==s)return Cause._escapeItem(e.contentWindow.location.href);if(r=e.getAttribute(s))return Cause._escapeItem(r);if(r=e[s])return Cause._escapeItem(r);n.push("Neither attribute or property "+s+" found in target or primary selector:")}else if(e&&"string"!=typeof e){if(s){if(r=s.getAttribute(a))return Cause._escapeItem(r);if(r=s[a])return Cause._escapeItem(r)}if(r=e.getAttribute(a))return Cause._escapeItem(r);if(r=e[a])return Cause._escapeItem(r);n.push("Attribute not property "+a+" found in target or primary selector:")}}return n&&n.push(e),""})}_outDebug(e,t){if(e){let e;for(e of t)console.log(e)}}_aMediaControl(e){let t=e.secSelObj,a=e.actVal.split(" ");if(a[1])switch(a[1]=a[1]._CjsRepQuo(),a[0]){case"load":t.setAttribute("src",a[1]);break;case"seek":t.currentTime=parseFloat(a[1]);break;case"volume":t.volume=parseFloat(a[1])}switch(a[0]){case"play":t.play();break;case"pause":t.pause();break;case"load":t.load()}}_aFullscreenOn(e){let t=e.secSelObj;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}_aFullscreenExit(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}trigger(e,t){"object"==typeof e?Cause._handleEvents(e,t):Cause._aTrigger({secSel:e,actVal:t})}triggerReal(e,t){"string"==typeof e&&(e=document.querySelector(e)),e?Cause._aTriggerReal({secSelObj:e,actVal:t}):console.log("No object found in document to triggerReal.")}_aTriggerReal(e){if(Cause._elNotThere(e))Cause._aStopPropagation(e);else try{e.secSelObj.addEventListener(e.actVal,function(e){},{capture:!0,once:!0}),e.secSelObj[e.actVal]()}catch(e){console.log("Cause JS error: Only DOM events support trigger-real.")}}_aTrigger(e){"string"==typeof e.obj&&-1===e.obj.indexOf("{@")&&-1===e.obj.indexOf("{$")?e.doc.querySelectorAll(e.obj).forEach(function(t,a){"~"==e.secSel.substr(0,1)?Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.e||null,!1,t):Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.e||null)}):"~"==e.secSel.substr(0,1)?Cause._handleEvents(e.secSel,e.actVal,!1,e.ajaxObj||null,e.e||null,!1,e.obj||null):"draw"==e.actVal?Cause._runInnerEvent(e.secSelObj,"draw"):Cause._handleEvents(e.secSelObj,e.actVal,!1,e.ajaxObj||null,e.e||null)}_getSel(e,t){switch(t){case"me":case"self":case"this":return e.secSelObj;default:return Cause._getObj(t)}}_aFormReset(e){let t=Cause._getSel(e,e.actVal);t&&"FORM"==t.tagName&&t.reset()}_getFieldValType(e){switch(e.tagName){case"INPUT":case"TEXTAREA":return"value";default:return"innerText"}}_getValFromList(e,t,a=!1){let s,r,l,n=-1;for(s in e)if(e.hasOwnProperty(s)){if(n++,r=e[s],a&&r.name==t)return n;for(l in r)if(r.hasOwnProperty(l)&&!a&&r[l]==t)return r.value.replace(/"/g,"")}return!!a&&-1}_getPosOfRule(e,t){return Cause._getValFromList(e,t,!0)}_aClone(e){let t=Cause._getSel(e,e.actVal),a=t.dataset.causeid;if(t)if("IFRAME"==t.tagName){if("complete"!=t.contentWindow.document.readyState)return setTimeout(this._aClone.bind(this,e),200),!1;Cause.mimicClones[a]=document.importNode(t.contentWindow.document.body,!0)}else Cause.mimicClones[a]=document.importNode(t,!0)}_aRestoreClone(e){let t=Cause._getSel(e,e.actVal),a=t.dataset.causeid;if(Cause.mimicClones[a])if("IFRAME"==t.tagName){if("complete"!=t.contentWindow.document.readyState)return!1;setTimeout(function(){t.contentWindow.document.body=Cause.mimicClones[a]},0)}else setTimeout(function(){let s=t.parentNode;s.replaceChild(Cause.mimicClones[a],t),Cause._aTrigger({secSel:"",actVal:"draw",secSelObj:s,ajaxObj:e.ajaxObj,e:e.el||null})},0)}_aRemoveClone(e){let t=Cause._getSel(e,e.actVal).dataset.causeid;t&&(Cause.mimicClones[t]=null)}_mimicReset(e){var t,a;for(t in e.target.cjsReset)if("title"!=t)switch((a=e.target.cjsReset[t]).type){case"text":a.el.innerText=a.value;break;default:a.el.value=a.value}e.target.cjsReset.title&&(Cause.currDocTitle=e.target.cjsReset.title._CjsDecodeHTML(),document.title=Cause.currDocTitle)}_aUrlChange(e){let t=e.actVal.split(" ")[0],a=e.actVal.replace(t,"").trim();""==a&&(a=document.title),Cause._urlTitle(t,a,e)}_urlTitle(e,t,a){e=e.replace(/"/g,""),t=t.replace(/"/g,""),e=Cause._resolveURL(e),window.location.href!=e&&window.history.pushState(e,t,e),document.title=t}_resolveURL(e){let t=document.location.href,a=history.state,s=document.title;history.replaceState(a,s,e);let r=document.location.href;return history.replaceState(a,s,t),r}_removePar(e,t){let a=new RegExp(t+"(.*)","g");return e.replace(a,"")}_aMimicInto(e){let t,a,s,r,l;if(t=e.secSelObj,"title"==e.actVal)l="title",a="title",s=Cause.currDocTitle;else{if(!(l=Cause._getSel(e,e.actVal)))return;a="INPUT"==l.tagName||"TEXTAREA"==l.tagName?"input":"text"}r=Cause._getFieldValType(t),"title"!=e.actVal&&(s=t[r]);var n,o=0,c=e.secSelObj.form||e.secSelObj.closest("form");switch(c&&(c.cjsReset||(c.cjsReset=[],c.addEventListener("reset",Cause._mimicReset)),"title"==a?c.cjsReset.title||(c.cjsReset.title=t.getAttribute("value")):t.causeResetValueSet||(o=c.cjsReset.length,c.cjsReset[o]={},c.cjsReset[o].el=l,c.cjsReset[o].value=s,c.cjsReset[o].type=a,t.causeResetValueSet=!0)),n=e.secSelObj[r],a){case"input":l.value=n;break;case"text":l.innerText=n;break;case"title":document.title=n._CjsDecodeHTML(),Cause.currDocTitle=n._CjsDecodeHTML()}}_aScrollIntoView(e){let t=e.actVal.split(" "),a="start",s="nearest",r=Cause._optDef(t,"behaviour-smooth","smooth","auto");"true"==e.actVal||"false"==e.actVal&&(a="end"),a=Cause._optDef(t,"block-center","center",a),a=Cause._optDef(t,"block-end","end",a),a=Cause._optDef(t,"block-nearest","nearest",a),s=Cause._optDef(t,"inline-center","center",s),s=Cause._optDef(t,"inline-end","end",s),s=Cause._optDef(t,"inline-nearest","nearest",s);try{e.secSelObj.scrollIntoView({behaviour:r,block:a,inline:s})}catch(t){e.secSelObj.scrollIntoView({behaviour:r,inline:s})}}_replaceAjaxVars(e,t,a=!0){return t=t.replace(/{\$([a-zA-Z0-9\-_\.\{\@\}]+)\}/g,function(t,s){let r,l="string"==typeof e.res;return r="STRING"==s&&l?e.res:"RAND"==s&&l?Math.floor(1e7*Math.random()):(s=(s=s.replace(/\{\@/g,".")).replace(/\}/g,"")).split(".").reduce(Cause._getObjFromDots,e.res),(r=a?Cause._escapeItem(r):r)||""})}_getObjFromDots(e,t){return void 0===e[t]?"":e[t]}_getObj(e){let t=Cause._splitIframeEls(e);return!!t&&(t[0].querySelector(t[1])||null)}_aQuickHtmlBeforeBegin(e){e.htmlPos="beforebegin",Cause._aQuickHtml(e)}_aQuickHtmlAfterBegin(e){e.htmlPos="afterbegin",Cause._aQuickHtml(e)}_aQuickHtmlBeforeEnd(e){e.htmlPos="beforeend",Cause._aQuickHtml(e)}_aQuickHtmlAfterEnd(e){e.htmlPos="afterend",Cause._aQuickHtml(e)}_aQuickHtml(e){let t=Cause._handleQuoAjax(e,e.actVal);t=Cause._replaceComponents(e,t),Cause._drawFunc(e.ajaxObj).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),e.htmlPos?e.secSelObj.insertAdjacentHTML(e.htmlPos,t):e.secSelObj.innerHTML=t}_replaceComponents(e,t,a){return t=t.replace(/\{\|([a-zA-Z0-9\.\-_]+)\}/g,function(t,s){if(!Cause.components[s])return"{|"+s+"}";let r=Cause.components[s].data;return r?(r=Cause._parseVars(r,e,a))||"":"{|"+s+"}"})}_parseVars(e,t,a=null){return null!==a&&(e=e.replace(/\{@i\}/gm,"."+a)),-1!==(e=Cause._replaceAttrs(t.obj,e,t.doc)).indexOf("{$")?Cause._replaceAjaxVars(t.ajaxObj,e):e}_aRenderBeforeBegin(e){e.renderPos="beforebegin",Cause._aRender(e)}_aRenderAfterBegin(e){e.renderPos="afterbegin",Cause._aRender(e)}_aRenderBeforeEnd(e){e.renderPos="beforeend",Cause._aRender(e)}_aRenderAfterEnd(e){e.renderPos="afterend",Cause._aRender(e)}_aRender(e){let t=e.actVal.trim().split(" "),a=!1,s=t[0];"concat("==s.trim().substr(0,7)&&(a=!0,t.shift());let r=Cause._handleQuoAjax(e,t.join(" "));if(a){let t=s.match(/concat\(\{\$([^\)]+)\}\)/)[1],a=e.ajaxObj.res[t];if(a){let t,s=Object.keys(a).length,l="";for(t=0;t<s;t++)l+=Cause._replaceComponents(e,r,t);Cause._renderIt(e,l)}else console.log(t+" was not found")}else r=Cause._replaceComponents(e,r),Cause._renderIt(e,r)}_renderIt(e,t){Cause._drawFunc(e.ajaxObj).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),e.renderPos?e.secSelObj.insertAdjacentHTML(e.renderPos,t):e.secSelObj.innerHTML=t}_escapeItem(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}_aAjaxFormPreview(e){e.formPreview=!0,Cause._aAjaxFormSubmit(e)}_aAjaxFormSubmit(e){e.formSubmit=!0;let t=e.secSelObj;t?(e.url=t.action,Cause._AjaxDo(e)):console.log("Form "+e.secSel+" not found.")}_aAjaxPreGet(e){e.preGet=!0,Cause._aAjax(e)}_optDef(e,t,a,s){return-1!=e.findIndex(e=>t===e.toLowerCase())?a:s}_AjaxDo(e){let t,a=e.actVal.split(" ");e.formMethod=Cause._optDef(a,"get","GET","POST"),e.dataType=Cause._optDef(a,"html","HTML","JSON"),e.cache=Cause._optDef(a,"cache",!0,!1),e.nocache=Cause._optDef(a,"nocache",!0,!1);let s=(e.nocache?"_="+Date.now()+"&":"")+"_CJS=1"+(e.formPreview?"&_CJSFORMPREVIEW=1":"")+(e.formSubmit?"&_CJSFORMSUBMIT=1":"")+"&_CJSTYPE="+e.dataType;if(e.pars=s,""===(t=e.url))return;e.formSubmit&&(e.pars+="&"+Cause._CheckForm(e.secSelObj,"pars")),"GET"==e.formMethod&&(t=Cause._AppendURIPar(t,e.pars,e.doc)),e.hash="";let r=t.indexOf("#");-1!==r&&(e.hash=t.substr(r+1),t=t.substr(0,r)),t=Cause._AttachGetVals(e.actVal,t,e.doc,"get-pars"),e.pars=Cause._AttachPostVals(e.actVal,e.pars),e.finalURL="GET"==e.formMethod?t:Cause._AppendURIPar(t,e.pars,e.doc),Cause.ajaxResLocations[e.finalURL]?e.preGet||(e.res=Cause.ajaxResLocations[e.finalURL],Cause._AjaxDisplay(e)):this.ajax(e.formMethod,e.dataType,t,e.pars,this._AjaxCallback.bind(this),this._AjaxCallbackErr.bind(this),e)}_getParVal(e,t){if(-1!==e.indexOf(t+"(")){let a=new RegExp(t+"[\\(]([\\S]+)[\\)]","g").exec(e)||"";if(a)return a[1]}return""}_AttachGetVals(e,t,a,s){let r=Cause._getParVal(e,s);return r&&(t=Cause._AppendURIPar(t,r,a)),t}_AttachPostVals(e,t){let a=Cause._getParVal(e,"post-pars");return a&&(t+="&"+a),t}_aAjax(e){let t=e.actVal.split(" ");e.url=t[0]._CjsRepQuo(),Cause._AjaxDo(e)}_AjaxCallbackErr(e,t,a){a.preGet?(Cause._debuggerActive||!Cause.setupEnded&&"function"==typeof Cause._debugOutput)&&Cause._debugOutput('Ajax-pre-get callback error debug: failed with error "'+t+'".'):(a.error=!0,a.errorCode=t,Cause._AjaxCallback(e,a),(Cause._debuggerActive||!Cause.setupEnded&&"function"==typeof Cause._debugOutput)&&Cause._debugOutput('Ajax callback error debug: failed with error "'+t+'".'))}_AjaxCallback(e,t){"string"==typeof e&&""!==e.trim()?t.res="JSON"==t.dataType?JSON.parse(e):e:(t.res="",(Cause._debuggerActive||!Cause.setupEnded&&"function"==typeof Cause._debugOutput)&&Cause._debugOutput(t)),!t.error&&t.preGet?Cause.ajaxResLocations[t.finalURL]=t.res:(Cause._AjaxDisplay(t),!t.error&&t.cache&&(Cause.ajaxResLocations[t.finalURL]=t.res))}_AjaxDisplay(e){let t="afterAjax"+(e.formSubmit?"Form"+(e.formPreview?"Preview":e.formSubmit?"Submit":""):"");e.error&&(t+=e.errorCode),Cause._handleEvents(e.obj,t,!1,e),""!==e.hash&&(document.location.hash="",document.location.hash=e.hash)}_setupMediaQueryHandler(e){if(e=e.trim(),Cause.mediaQueriesOrig[e])return Cause.mediaQueriesOrig[e];let t="__mql_"+(Cause.mediaQueries.length+1);Cause.mediaQueriesOrig[e]=t,Cause.conditionals[t]=[],Cause.conditionals[t].push({name:"mql-true",value:t});let a=window.matchMedia(e),s=a.matches;return Cause.mediaQueries.push(t),Cause.mediaQueries[t]={ev:a,val:s},Cause.mediaQueries[t].ev.addListener(function(e){let t=Cause.mediaQueriesOrig[e.media];Cause.mediaQueries[t].val=e.matches}),t}_aPreventDefault(e){e.e&&e.e.preventDefault()}_aStopImmediatePropagation(e){e.e&&e.e.stopImmediatePropagation(),e.obj.causeStopProp=!0}_aStopPropagation(e){e.e&&e.e.stopPropagation(),e.obj.causeStopProp=!0}_aSetProperty(e){e.actVal=e.actVal._CjsSpaceQuoIn();let t=e.actVal.split(" ");t[1]=Cause._handleQuoAjax(e,t[1])._CjsSpaceQuoOut(),e.secSelObj[t[0]]="true"==t[1]||"false"!=t[1]&&t[1]}_aRemoveProperty(e){e.secSelObj.style.removeProperty(e.actVal)}_aRemoveAttribute(e){e.secSelObj.removeAttribute(e.actVal)}_aSetAttribute(e){e.actVal=e.actVal._CjsSpaceQuoIn();let t=e.actVal.split(" ");t[1]=Cause._handleQuoAjax(e,t[1])._CjsSpaceQuoOut(),e.secSelObj.setAttribute(t[0],t[1])}_handleQuoAjax(e,t){return t=-1!==(t=t._CjsRepQuo()).indexOf("{$")?Cause._replaceAjaxVars(e.ajaxObj,t,"_aQuickHtml"!=e.func):t}_aLocation(e){let t=e.actVal._CjsRepQuo();e.doc.location.href=t}_aCopyToClipboard(e){let t=Cause._getSel(e,e.actVal);if(-1!==["INPUT","TEXTAREA"].indexOf(t.tagName)){let e="readonly"==t.getAttribute("readonly");t.removeAttribute("readonly"),t.select(),document.execCommand("copy"),e&&t.setAttribute("readonly","readonly")}else{let e=document.createElement("textarea");e.id="causejs-copy-field",e.innerHTML=t.innerText,document.body.appendChild(e);let a=document.getElementById("causejs-copy-field");a.select(),document.execCommand("copy"),Cause._removeObj(a)}}_aLoadStyle(e){Cause._aLoadScript(e,"style")}_aLoadScript(e,t){let a=e.actVal._CjsRepQuo();if(!Cause.scriptTrack.includes(a)){let s="style"==t?"link":"script",r="style"==t?"href":"src",l=e.doc.createElement(s);"style"==t&&(l.rel="stylesheet"),l[r]=a,e.doc.head.appendChild(l),Cause.scriptTrack.push(a)}}_getCauseID(e){if(e){if(e.dataset.causeid)return e.dataset.causeid;{Cause.causeIDTrack++;let t="id-"+Cause.causeIDTrack;return e.dataset.causeid=t,t}}return!1}_aAlert(e){alert(e.actVal._CjsRepQuo())}_aConsoleLog(e){console.log(e.actVal._CjsRepQuo())}_aStyle(e){let t=Cause._handleQuoAjax(e,e.actVal).split(" "),a=t.shift();e.secSelObj.style[a]=t.join(" ")}_aLoadImages(e){let t=e.actVal;e.doc.querySelectorAll("img["+t+"], picture source["+t+"]").forEach(function(e,a){let s="IMG"==e.tagName?"src":"srcset";e.setAttribute(s,e.getAttribute(t)),e.removeAttribute(t)})}_aFunc(e){let t=[];e.actVal=e.actVal._CjsSpaceQuoIn();let a=e.actVal.trim().split(" "),s=a.splice(0,1);if("function"!=typeof window[s])console.log(s+" is not a function.");else{let r;for(r of a)r="true"==r||"false"!=r&&(isNaN(r)?r._CjsSpaceQuoOut()._CjsRepQuo():parseFloat(r)),t.push(r);window[s](e,t)}}_ActValSelItem(e){let t=e.actVal.split(" "),a=t.splice(-1);return[Cause._getSel(e,t.join(" ")),a[0]]}_ifVisible(e,t){let a=("object"==typeof e.actVal?e.actVal:Cause._getSel(e,e.actVal)).getBoundingClientRect(),s=a.top,r=a.bottom;return t?s>=0&&r<=window.innerHeight:s<window.innerHeight&&r>=0}_cMqlTrue(e){return Cause.mediaQueries[e.actVal].val}_ifFocus(e,t=!0){let a=Cause._getFocusedOfNodes(e.actVal);return t?0===a[1]:a[1]==a[0].length-1}_cIfCompletelyVisible(e){return Cause._ifVisible(e,!0)}_cIfDisplay(e){let t=document.querySelector(e.actVal);return!(!t||"none"===getComputedStyle(t,null).display)}_cIfExists(e){return!!Cause._getSel(e,e.actVal)}_cIfFormChanged(e){return Cause._CheckForm(Cause._getSel(e,e.actVal),"check")}_cIfFunc(e){return window[e.actVal](e)}_cIfHasClass(e){let t=Cause._ActValSelItem(e);return!(!t[0]||!Cause._hasClassObj(t[0],t[1].substr(1)))}_cIfEmpty(e){return!!Cause._selCompare(e,"eM")}_cIfInnerText(e){return!!Cause._selCompare(e,"iT")}_cIfInnerHtml(e){return!!Cause._selCompare(e,"iH")}_cIfMaxLength(e){return!!Cause._selCompare(e,"maL")}_cIfMinLength(e){return!!Cause._selCompare(e,"miL")}_selCompare(e,t){let a,s,r,l=e.actVal._CjsSpaceQuoIn();"eM"==t?a=l:(s=(a=l.split(" ")).pop()._CjsSpaceQuoOut()._CjsRepQuo(),a=a.join(" "));try{r=Cause._getSel(e,a)}catch(e){r=a}switch(t){case"eM":case"maL":case"miL":let e;if(r){e=r[Cause._getFieldValType(r)]}else e=a;switch(t){case"eM":return""===e;case"maL":return e.length<=s;case"miL":return e.length>=s}break;case"iT":return!(!r||s!=r.innerText);case"iH":return!(!r||s!=r.innerHTML)}}_cIfMediaMaxWidth(e){return window.matchMedia("all and (max-width: "+e.actVal+")").matches}_cIfMediaMinWidth(e){return window.matchMedia("all and (min-width: "+e.actVal+")").matches}_cIfScrolltopGreater(e){return"body"==e.obj?(window.pageYOffset||document.documentElement.scrollTop)>e.actVal:e.obj.scrollTop>e.actVal}_cIfScrolltopLess(e){return"body"==e.obj?(window.pageYOffset||document.documentElement.scrollTop)<e.actVal:e.obj.scrollTop<e.actVal}_cIfVisible(e){return Cause._ifVisible(e)}_cIfFocusFirst(e){return Cause._ifFocus(e)}_cIfFocusLast(e){return Cause._ifFocus(e,!1)}_getCookie(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}_cookieExists(e){return!(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}_setCookie(e,t,a,s,r,l){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var n="";if(a)switch(a.constructor){case Number:n=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:n="; expires="+a}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+n+(r?"; domain="+r:"")+(s?"; path="+s:"")+(l?"; secure":""),!0}_aSetCookie(e){let t=e.actVal,a=(t=(t=(t=t.replace(/\\\"/g,"_cjs_escaped_quote"))._CjsSpaceQuoIn()).replace(/_cjs_escaped_quote/g,'\\"')).split(" ");a[1]=a[1]?a[1]._CjsSpaceQuoOut()._CjsRepQuo():"",a[2]=a[2]?a[2].replace(/_cjs_space/g," ")._CjsRepQuo():"",a[2]="Infinity"==a[2]?1/0:"Year"==a[2]?31536e3:/^[0-9e]+$/.test(a[2])?+a[2]:a[2],a[3]=a[3]?a[3]._CjsRepQuo():null,a[4]=a[4]?a[4]._CjsRepQuo():null,a[5]="true"==a[5]||"false"!=a[5]&&null,"true"!=a[2]||a[3]||a[4]||a[5]||(a[2]=null,a[5]=!0),"false"!=a[2]||a[3]||a[4]||a[5]||(a[2]=null,a[5]=!1),"true"!=a[3]||a[4]||a[5]||(a[3]=null,a[5]=!0),"false"!=a[3]||a[4]||a[5]||(a[3]=null,a[5]=!1),"true"!=a[4]||a[5]||(a[4]=null,a[5]=!0),"false"!=a[4]||a[5]||(a[4]=null,a[5]=!1),Cause._setCookie(a[0],a[1],a[2],a[3],a[4],a[5])||console.log("set-cookie "+a[0]+" failed")}_aRemoveCookie(e){let t=e.actVal.split(" ");if(!t[0])return!1;t[1]=t[1]?t[1]._CjsRepQuo():null,t[2]=t[2]?t[2]._CjsRepQuo():null;let a=encodeURIComponent(t[0])+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(t[1]?"; path="+t[1]:"")+(t[2]?"; domain="+t[2]:"");return document.cookie=a,!0}_cIfVarTrue(e){return window[e.actVal]}_cIfCookieExists(e){return Cause._cookieExists(e.actVal)}_cIfCookieEquals(e){let t=e.actVal.split(" ");if(!Cause._cookieExists(t[0]))return!1;let a=t[0];return t.shift(),t=t.join(" "),Cause._getCookie(a)==t._CjsRepQuo()}_cIfSelection(e){let t=window.getSelection();return e.actVal=e.actVal._CjsRepQuo().trim(),t.toString()==e.actVal}}const Cause=new _Cause;"undefined"!=typeof module&&(module.exports=Cause);